var ajaxpath;function setAjaxPath(){var hostname,parts=window.location.hostname.split(".");ajaxpath=("dash"==parts[0]?"":"/_dash")+"/includes/Framework/ajax.php"}$(document).ready((function(){var delay;scaleDropdowns(),$(".carousel").Carousel({onFirst:function(){$(this).parent().addClass("ready")}}),$(".gallery").Gallery(),$("#listing-hero").mousemove((function(){clearTimeout(delay);var banner=$(this);banner.addClass("active").removeClass("inactive"),delay=setTimeout((function(){banner.addClass("inactive").removeClass("active")}),2500)}))})),setAjaxPath();var isMobile=!1;function scaleDropdowns(){var dropdowns=$("select","#search-settings");function makeFit(){var selected=$("option:selected",this),label=selected.text(),dropdown=selected.parents(".dropdown"),sizer=$("<div class='sizer'/>");sizer.html(label),dropdown.append(sizer);var width=sizer.outerWidth();dropdown.width(width),$(".sizer",dropdown).remove()}dropdowns.length<=0||(dropdowns.each((function(){makeFit.call(this)})),dropdowns.change((function(){makeFit.call(this)})))}!function($){function addMobileClass(){var winW=$(window).width();winW<=768&&!isMobile?($("body").addClass("mobile"),isMobile=!0):winW>768&&isMobile&&($("body").removeClass("mobile"),isMobile=!1)}$(document).ready(addMobileClass),$(window).resize(addMobileClass)}(jQuery),function($){var menu=$(".menu","#header");$("a",menu).click((function(){var anchor=$(this).attr("href");if(!anchor.startsWith("#"))return!0;var section=$(anchor+".section");if(section.length<=0)return!0;var headerH=$("#header").outerHeight();return $("html,body").animate({scrollTop:section.offset().top-(headerH-30)}),!1}));var mobileMenu=$(".mobile_menu");mobileMenu.click((function(){mobileMenu.toggleClass("active"),menu.toggleClass("active"),menu.hasClass("active")?menu.removeClass("inactive"):menu.addClass("inactive")})),$(".menu, .mobile_menu","#header").click((function(e){return!!$(e.target).is("a, a *")})),$("body").click((function(){menu.removeClass("active").addClass("inactive")})),$(".menu > li > a","#header").click((function(){var parent=$(this).parent(),submenu=$(".submenu_wrapper",parent);return $(".submenu_wrapper").not(submenu).addClass("inactive").removeClass("active"),!!(submenu.length<=0||submenu.is(":visible"))||(submenu.addClass("active").removeClass("inactive"),!1)}))}(jQuery),function($){$("[data-anchor]").each((function(){$(this).click((function(){var anchor=$(this).data("anchor"),target=$("#"+anchor);if(target.length<=0)return!0;var headerH=$("#header").outerHeight();return $("html,body").animate({scrollTop:target.offset().top-(headerH-30)}),!1}))}))}(jQuery),function($){var elem=$("[data-lazy]"),promises=[],altAtts=["aria-label","title"];elem.each((function(){var item=$(this),image=item.data("lazy");if(image){var def=new $.Deferred;$("<img/>").attr("src",image).on("load",(function(){var img=$(this),isMask=item.hasClass("mask");isMask?img.remove():altAtts.some((function(el){item.attr(el)&&img.attr("alt",item.attr(el))})),def.done((function(){isMask?item.css("background-image","url("+image+")"):img.prependTo(item),item.addClass("loaded")})),def.resolve()})),promises.push(def)}}))}(jQuery),function($){var sections=$(".section"),triggers=[],lastPos=0;function sectionHeights(){sections.each((function(){var pos=$(this).offset().top,height=$(this).outerHeight(),classes=$(this).attr("class"),range={section:$(this).attr("id"),range:[pos,pos+height],sectionHeight:height,classes:classes.split(" ")};triggers.push(range)}))}function payAttention(){var scrollPos=$(window).scrollTop(),windowH=$(window).height(),scrollDir=scrollPos>lastPos?"down":"up";lastPos=scrollPos;var header=$("#header"),headerH=header.outerHeight(),welcome=$("#welcome");scrollPos>=windowH-2*headerH?header.addClass("locked").removeClass("unlocked"):welcome.length<=0?header.addClass("locked black").removeClass("unlocked white"):header.addClass("unlocked").removeClass("locked");var invert_white="#000A0C",invert_black="#FFFFFF";$.each(triggers,(function(){var section=$("#"+this.section),range=this.range,classes=this.classes;scrollPos>=range[0]-headerH&&scrollPos<range[1]&&(section.hasClass("white")?header.addClass("black").removeClass("white"):header.removeClass("black").addClass("white"));var tripDown=(this.sectionHeight>windowH?windowH:this.sectionHeight)/1.25,tripUp=.25*this.sectionHeight,tripOn="down"==scrollDir?tripDown:tripUp;scrollPos+tripOn>=range[0]&&scrollPos<range[1]-tripOn?section.not(".static").addClass("active").removeClass("inactive"):scrollPos+tripDown<range[0]||range[1]}))}sectionHeights(),payAttention(),$(window).scroll(payAttention),$(window).on("touchmove",payAttention),$(window).resize((function(){sectionHeights(),payAttention()}))}(jQuery),function($){function rotateCarousel(){if(!0!==this.rotating){var $this=this,carousel=$(this);this.rotation=setInterval((function(){var active,next=$(".carousel_item.active",carousel).next(),first=$(".carousel_item:first-child",carousel);next.length<=0&&(next=first),getSlide.call(carousel,next.index())}),5e3),this.timer&&this.timer.CountdownTimer("resume"),this.rotating=!0}}function pauseCarousel(){!1!==this.rotating&&(clearInterval(this.rotation),this.timer&&this.timer.CountdownTimer("pause"),this.rotating=!1)}function getSlide(index){var $this=this,carousel=$(this),active=$(".carousel_item.active",this),next,next;if(Number.isInteger(index))var next=$(".carousel_item:eq("+index+")",this);else index=(next=(next="prev"==index?active.prev():active.next()).length<=0?$(".carousel_item:"+("prev"==index?"last-child":"first-child"),carousel):next).index();active.addClass("inactive").removeClass("active"),next.addClass("active").removeClass("inactive"),activateThumb.call(this,index)}function activateThumb(index){var carousel,gallery=$(this).parent().next(".gallery");if(gallery){var thumbs=$(".gallery_item",gallery);thumbs.removeClass("active"),thumbs.eq(index).addClass("active")}}function delayRotation(){var $this=this,carousel=$(this);setTimeout((function(){rotateCarousel.call($this),$(".wait:visible",carousel).fadeOut(300,(function(){$(this).addClass("inactive")}))}),3e3)}function delayCountdownVisibility(){this.timer=this.timer?this.timer:$(this).parents().find(".countdown");var $this=this;setTimeout((function(){$this.timer.CountdownTimer("render")}),2e3)}$.fn.Carousel=function(options){var defaults={rotate:!0,interval:5e3,onLoad:null,onFirst:null};this.options=$.extend(defaults,options);var $this=this,carousel=$(this),items=$(".carousel_item",carousel),promises=[];items.each((function(i){var def=new $.Deferred,item=$(this),src=item.data("src");if(!src)return!0;$("<img/>").attr("src",src).on("load",(function(){$(this).remove(),item.css("background-image","url("+src+")").addClass("loaded").removeAttr("data-src"),def.done((function(){0==i&&(getSlide.call(carousel,i),$(".wait:visible",carousel).fadeOut(300,(function(){$(this).addClass("inactive")})),"function"==typeof $this.options.onFirst&&$this.options.onFirst.call($this))})),def.resolve()})),promises.push(def)})),$.when.apply($,promises).done((function(){"function"==typeof $this.options.onLoad&&$this.options.onLoad.call($this),activateThumb.call($this,0),delayRotation.call($this),delayCountdownVisibility.call($this)})),this.timer=carousel.parent().find(".countdown"),this.timer&&this.timer.CountdownTimer({render:!1}),$(document).on("click",".countdown.clone",(function(){!0===$this.rotating?pauseCarousel.call($this):rotateCarousel.call($this)})),$(".nav",carousel).click((function(){pauseCarousel.call($this),getSlide.call($this,$(this).hasClass("prev")?"prev":"next"),rotateCarousel.call($this)})),$(document).keydown((function(e){if(37==e.keyCode||39==e.keyCode)return pauseCarousel.call($this),getSlide.call($this,37==e.keyCode?"prev":"next"),rotateCarousel.call($this),!1}))}}(jQuery),function($){var methods={init:initCountdown,render:renderCountdown,start:startCountdown,pause:pauseCountdown,resume:resumeCountdown,destroy:function(){}};function initCountdown(options){var defaults={count:5,render:!0};this.options=$.extend(defaults,options),this.countdown=$(this),options.render&&renderCountdown.call(this)}function renderCountdown(){refreshClass.call(this,"paused","active"),this.number.text(this.options.count)}function startCountdown(){refreshClass.call(this,"active","paused");var count=this.options.count,$this=this;this.timer=setInterval((function(){count=--count<=0?$this.options.count:count,$this.number.text(count)}),1e3)}function pauseCountdown(){clearInterval(this.timer),renderCountdown.call(this)}function resumeCountdown(){renderCountdown.call(this),startCountdown.call(this)}function refreshClass(addClass,removeClass){var countdown=this.countdown;countdown.removeClass(removeClass).addClass(addClass);var clone=countdown.clone().addClass("clone");countdown.before(clone),countdown.remove(),this.countdown=clone,this.number=$(".countdown_number",clone)}$.fn.CountdownTimer=function(methodOpt){return methods[methodOpt]?methods[methodOpt].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof methodOpt&&methodOpt?void $.error("Method "+methodOpt+" does not exist on jQuery.CountdownTimer."):methods.init.apply(this,arguments)}}(jQuery),function($){function getImage(thumb){var index=thumb.index(),image=thumb.data("src"),thumbs;$(".gallery_image").attr("src",image),$(".gallery_item").removeClass("active"),thumb.addClass("active")}function getNext(){var active,next=$(".gallery_item.active").next(),first=$(".gallery_item:first");next.length<=0&&(next=first),getImage(next)}function getPrev(){var active,prev=$(".gallery_item.active").prev(),last=$(".gallery_item:last");prev.length<=0&&(prev=last),getImage(prev)}function buildGalleryModal(){var modal,container,image,next,prev;return(modal=document.createElement("div")).id="gallery-modal",modal.className="modal",(container=document.createElement("div")).className="container",(image=document.createElement("img")).className="gallery_image",(next=document.createElement("div")).className="gallery_nav next",(prev=document.createElement("div")).className="gallery_nav prev",container.appendChild(next),container.appendChild(prev),container.appendChild(image),modal.appendChild(container),document.body.appendChild(modal),$(modal)}$.fn.Gallery=function(options){if(!(this.length<=0)){var modal=$("#gallery-modal");this.modal=modal.length<=0?buildGalleryModal():modal;var $this=this,container=$(".container",this),nav,navW=$(".nav",this).innerWidth(),contW=container.width()-2*navW,lastPos;$(".gallery_item:last-child",container).position().left>contW&&$(this).addClass("navigate"),$(".nav",this).click((function(){var dir=$(this).hasClass("prev")?"prev":"next",goPos=!1;$(".gallery_item",container).each((function(){var scrollPos=container.scrollLeft(),innerPos=$(this).position().left,itemW,outerPos=innerPos+$(this).outerWidth();return"prev"==dir&&outerPos+scrollPos>=scrollPos?(goPos=scrollPos+innerPos,!1):outerPos+scrollPos>scrollPos+contW&&scrollPos+innerPos<=scrollPos+contW?(goPos=scrollPos+innerPos,!1):void(goPos=!1)})).promise().done((function(){!1!==goPos&&container.animate({scrollLeft:goPos},500)}))})),$(".gallery_item",this).each((function(){$(this).click((function(){var thumb=$(this),src=thumb.data("src");if(src)return $("img",$this.modal).attr("src",src),$(".gallery_item").removeClass("active"),thumb.addClass("active"),$this.modal.fadeIn(350),!1}))})),$(".gallery_nav",this.modal).click((function(){var dir;"next"==($(this).hasClass("next")?"next":"prev")?getNext():getPrev()})),$(document).keydown((function(e){if($("#gallery-modal").is(":visible"))if(27==e.keyCode)$this.modal.fadeOut(350);else{if(37==e.keyCode)return getPrev(),!1;if(39==e.keyCode)return getNext(),!1}})),$(".gallery_image, .gallery_nav","#gallery-modal").click((function(){return!1})),$("#gallery-modal").click((function(){$this.modal.fadeOut(350)}))}}}(jQuery),function($){var form=$(".optin_form"),req=["email_address"],testable=["email","email_address","email_addresses[]"];function validateEmail(email){var re;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(email).toLowerCase())}form.each((function(){var $form=this,response=$(".message",this),button=$("button.submit",this),buttonTxt=button.text();button.click((function(){var error=!1,error_message=null;button.text("Joining..."),button.prop("disabled",!0),response.html("");var dataObj={action:"send_lead_notification",user_id:$($form).data("user"),lead:{}};if($.each(req,(function(){var field=$('[name="'+this+'"]',$form);if(!field||!field.val()||-1!=$.inArray(String(this),testable)&&!validateEmail(field.val()))return field.addClass("error"),error=!0,error_message="Required field(s) missing.",!0;dataObj.lead[this]=field.val()})),error)return response.addClass("error"),response.html(error_message),button.text(buttonTxt),button.prop("disabled",!1),!1;$.ajax({url:ajaxpath,type:"post",data:dataObj,dataType:"json",success:function(resp){if(resp.success){var contact=resp.success,message="Thank you for subscribing!";response.addClass("success"),response.html(message)}else resp.error&&(response.addClass("error"),response.html(resp.error))}}).fail((function(jqXHR,textStatus,errorThrown){response.addClass("error"),response.html(textStatus),console.log(errorThrown)})).always((function(){button.text(buttonTxt),button.prop("disabled",!1)}))})),$("input,textarea",this).focusin((function(){$(this).removeClass("error")}))}))}(jQuery),function($){$("#start-search").click((function(){$("#search-bar").submit()}))}(jQuery);var isMapsApiLoaded=!1;function formatCash(n){return(n=parseFloat(n.replace(/,/g,"")))<1e3?n:n>=1e3&&n<1e6?+(n/1e3).toFixed(1)+"k":n>=1e6&&n<1e9?+(n/1e6).toFixed(1)+"M":n>=1e9&&n<1e12?+(n/1e9).toFixed(1)+"B":n>=1e12?+(n/1e12).toFixed(1)+"T":void 0}window.initMap=function(){isMapsApiLoaded=!0;var mapElem=document.getElementById("map");if(mapElem){var map=new google.maps.Map(mapElem,{zoom:12,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}}),markers=[];$("[data-latlng]").each((function(){var target=$(this),coords=target.data("latlng").split(","),price=$(".listing_price",this).text(),href=$("a",this).attr("href");price.startsWith("$")&&(price="$"+formatCash(price.replace("$","")));var icon={path:"M -25 -30 H 25 V -10 H -25 Z",scale:1,fillOpacity:0,strokeOpacity:0,labelOrigin:new google.maps.Point(0,-20)},label={text:price,className:"marker_label"},latlng=new google.maps.LatLng(coords[0],coords[1]),marker=new google.maps.Marker({map:map,position:latlng,icon:icon,label:label,url:href});markers.push(marker),marker.addListener("click",(function(){window.location.href=this.url})),marker.addListener("mouseover",(function(){label.className="marker_label marker_active",marker.setLabel(label),marker.setZIndex(20),target.addClass("focused")})),marker.addListener("mouseout",(function(){label.className="marker_label",marker.setLabel(label),marker.setZIndex(markers.length-1),target.removeClass("focused")})),$(this).mouseenter((function(){var pos=marker.getPosition();label.className="marker_label marker_active",map.panTo(pos),marker.setLabel(label),marker.setZIndex(20)})).mouseleave((function(){label.className="marker_label",marker.setLabel(label),marker.setZIndex(markers.length-1)}))}));var bounds=new google.maps.LatLngBounds;for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());map.fitBounds(bounds)}};